!function(l){var t=elementorModules.frontend.handlers.Base.extend({stretchElement:null,getDefaultSettings:function(){return{selectors:{widgetContainer:".pp-toc",container:'.elementor:not([data-elementor-type="header"]):not([data-elementor-type="footer"])',expandButton:".pp-toc__header",collapseButton:".pp-toc__header",body:".pp-toc__body",headerTitle:".pp-toc__header-title",scrollTop:".pp-toc__scroll-to-top--container"},classes:{anchor:"pp-toc-menu-anchor",listWrapper:"pp-toc__list-wrapper",listItem:"pp-toc__list-item",listTextWrapper:"pp-toc__list-item-text-wrapper",firstLevelListItem:"pp-toc__top-level",listItemText:"pp-toc__list-item-text",activeItem:"pp-toc-item-active",headingAnchor:"pp-toc__heading-anchor",collapsed:"pp-toc--collapsed"},listWrapperTag:"numbers"===this.getElementSettings().marker_view?"ol":"ul"}},getDefaultElements:function(){var e=this.getSettings(),t=this.getElementSettings();return{$pageContainer:jQuery(t.container||e.selectors.container),$widgetContainer:this.$element.find(e.selectors.widgetContainer),$expandButton:this.$element.find(e.selectors.expandButton),$collapseButton:this.$element.find(e.selectors.collapseButton),$tocBody:this.$element.find(e.selectors.body),$listItems:this.$element.find("."+e.classes.listItem),$scrollTop:this.$element.find(e.selectors.scrollTop)}},bindEvents:function(){var e=this,t=this.getElementSettings();t.minimize_box&&this.elements.$expandButton.on("click",function(){return l(e.$element).hasClass(e.getSettings("classes.collapsed"))?e.expandBox():e.collapseBox()}),t.collapse_subitems&&this.elements.$listItems.hover(function(e){return jQuery(e.target).slideToggle()}),t.sticky_toc_toggle&&elementorFrontend.elements.$window.on("resize",this.handleStickyToc),t.scroll_to_top_toggle&&this.elements.$scrollTop.on("click",function(){e.scrollToTop()})},getHeadings:function(){var e=this.getElementSettings(),t=e.headings_by_tags.join(","),i=this.getSettings("selectors"),s=e.exclude_headings_by_selector;return this.elements.$pageContainer.find(t).not(i.headerTitle).filter(function(e,t){return!jQuery(t).closest(s).length})},addAnchorsBeforeHeadings:function(){var t=this.getSettings("classes");this.elements.$headings.before(function(e){return'<span id="'+t.headingAnchor+"-"+e+'" class="'+t.anchor+' "></span>'})},activateItem:function(e){var t,i=this.getSettings("classes");this.deactivateActiveItem(e),e.addClass(i.activeItem),this.$activeItem=e,this.getElementSettings("collapse_subitems")&&(t=void 0,(t=e.hasClass(i.firstLevelListItem)?e.parent().next():e.parents("."+i.listWrapper).eq(-2)).length?(this.$activeList=t,this.$activeList.stop().slideDown()):delete this.$activeList)},deactivateActiveItem:function(e){var t;this.$activeItem&&!this.$activeItem.is(e)&&(t=this.getSettings().classes,this.$activeItem.removeClass(t.activeItem),!this.$activeList||e&&this.$activeList[0].contains(e[0])||this.$activeList.slideUp())},followAnchor:function(t,i){var s=this,e=t[0].hash,n=void 0;try{n=jQuery(decodeURIComponent(e))}catch(o){return}0===i&&elementorFrontend.waypoint(n,function(e){s.itemClicked||("down"===e?s.activateItem(t):s.deactivateActiveItem())},{offset:"bottom-in-view",triggerOnce:!1}),elementorFrontend.waypoint(n,function(e){s.itemClicked||("down"===e?s.activateItem(s.$listItemTexts.eq(i+1)):s.activateItem(t))},{offset:0,triggerOnce:!1})},followAnchors:function(){var i=this;this.$listItemTexts.each(function(e,t){return i.followAnchor(jQuery(t),e)})},setOffset:function(e){var t=this.getSettings(),i=this.$element.find("."+t.classes.listItem),s=this.getCurrentDeviceSetting("scroll_offset");i.each(function(){l("a",this).on("click",function(e){e.preventDefault();var t=this.hash;l("html, body").animate({scrollTop:l(t).offset().top-parseInt(s.size)},800)})})},populateTOC:function(){var e=this;this.listItemPointer=0;var t=this.getElementSettings();t.hierarchical_view?this.createNestedList():this.createFlatList(),this.$listItemTexts=this.$element.find(".pp-toc__list-item-text"),this.$listItemTexts.on("click",this.onListItemClick.bind(this)),elementorFrontend.isEditMode()||this.followAnchors(),l(window).on("scroll",function(){"window_top"===t.scroll_to_top_option?0<l(window).scrollTop()?e.elements.$scrollTop.show():e.elements.$scrollTop.hide():e.getID().parents(".elementor-widget-wrap").offset().top>=l(window).scrollTop()?e.elements.$scrollTop.hide():e.elements.$scrollTop.show()})},createNestedList:function(){var n=this;this.headingsData.forEach(function(e,t){e.level=0;for(var i=t-1;0<=i;i--){var s=n.headingsData[i];if(s.tag<=e.tag){e.level=s.level,s.tag<e.tag&&e.level++;break}}}),this.elements.$tocBody.html(this.getNestedLevel(0))},createFlatList:function(){this.elements.$tocBody.html(this.getNestedLevel())},getNestedLevel:function(e){for(var t=this.getSettings(),i=this.getElementSettings(),s=this.getElementSettings("icon"),n="<"+t.listWrapperTag+' class="'+t.classes.listWrapper+'">';this.listItemPointer<this.headingsData.length;){var o,l,a=this.headingsData[this.listItemPointer],r=t.classes.listItemText;if(0===a.level&&(r+=" "+t.classes.firstLevelListItem),e>a.level)break;e===a.level&&(n+='<li class="'+t.classes.listItem+" level-"+e+'">',n+='<div class="'+t.classes.listTextWrapper+'">',o='<a href="#'+t.classes.headingAnchor+"-"+this.listItemPointer+'" class="'+r+'">'+a.text+"</a>","bullets"===i.marker_view&&s&&(o='<i class="'+s.value+'"></i>'+o),n+=o,n+="</div>",this.listItemPointer++,(l=this.headingsData[this.listItemPointer])&&e<l.level&&(n+=this.getNestedLevel(l.level)),n+="</li>")}return n+="</"+t.listWrapperTag+">"},handleNoHeadingsFound:function(){var e=ppToc;if(elementorFrontend.isEditMode())return this.elements.$tocBody.html(e.no_headings_found)},collapseOnInit:function(){var e=(self=this).getElementSettings("minimized_on"),t=elementorFrontend.getCurrentDeviceMode();""!==e&&"array"!=typeof e&&(e=[e]),0!==e.length&&"object"==typeof e&&e.forEach(function(e){("desktop"===e[0]&&"desktop"==t&&l(window).width()<elementorFrontend.config.breakpoints.xxl||"tablet"===e[0]&&"tablet"===t&&l(window).width()<elementorFrontend.config.breakpoints.lg||"mobile"===e[0]&&"mobile"===t&&l(window).width()<elementorFrontend.config.breakpoints.md)&&self.collapseBox()})},setHeadingsData:function(){var i=this;this.headingsData=[],this.elements.$headings.each(function(e,t){i.headingsData.push({tag:+t.nodeName.slice(1),text:t.textContent})})},run:function(){if(elementSettings=this.getElementSettings(),this.elements.$headings=this.getHeadings(),!this.elements.$headings.length)return this.handleNoHeadingsFound();this.setHeadingsData(),elementorFrontend.isEditMode()||this.addAnchorsBeforeHeadings(),this.populateTOC(),elementSettings.minimize_box&&this.collapseOnInit(),elementSettings.sticky_toc_toggle&&this.handleStickyToc(),""!==elementSettings.scroll_offset.size&&undefined!==elementSettings.scroll_offset.size&&this.setOffset()},expandBox:function(){var e=this.getCurrentDeviceSetting("min_height");this.$element.removeClass(this.getSettings("classes.collapsed")),this.elements.$tocBody.slideDown(),this.elements.$widgetContainer.css("min-height",e.size+e.unit)},collapseBox:function(){this.$element.addClass(this.getSettings("classes.collapsed")),this.elements.$tocBody.slideUp(),this.elements.$widgetContainer.css("min-height","0px")},onInit:function(){var e=this;this.initElements(),this.bindEvents(),jQuery(document).ready(function(){return e.run()})},onListItemClick:function(e){var t=this;this.itemClicked=!0,setTimeout(function(){return t.itemClicked=!1},2e3);var i=jQuery(e.target),s=i.parent().next(),n=this.getElementSettings("collapse_subitems"),o=void 0;n&&i.hasClass(this.getSettings("classes.firstLevelListItem"))&&s.is(":visible")&&(o=!0),this.activateItem(i),n&&o&&s.slideUp()},handleStickyToc:function(){var e,t=this.getElementSettings(),i=elementorFrontend.getCurrentDeviceMode(),s=t.sticky_toc_disable_on,n=this.getID(),o=t.sticky_toc_type;if("in-place"===o?(e=n.parent().parent().outerWidth(),n.css("width",e),tocWidth=e):"custom-position"===o&&n.css("width",""),-1!==l.inArray(i,s))return n.removeClass("floating-toc"),void l(window).off("scroll",this.stickyScroll);l(window).on("scroll",l.proxy(this.stickyScroll,this))},stickyScroll:function(){var e=this.getID(),t=(this.getElementSettings(),document.querySelector(".elementor-widget-pp-table-of-contents").getBoundingClientRect()),i=e.outerHeight();if(e.hasClass("floating-toc")?e.parent().parent().css("height",i):e.parent().parent().css("height",""),t.y+t.height/2<0){if(e.hasClass("floating-toc"))return;e.fadeOut(250,function(){e.addClass("floating-toc"),e.fadeIn()})}else{if(!e.hasClass("floating-toc"))return;e.fadeOut(250,function(){e.removeClass("floating-toc"),e.fadeIn()})}},scrollToTop:function(){var e;"window_top"===this.getElementSettings("scroll_to_top_option")?l("html, body").animate({scrollTop:0},250):(e=this.getID().parents(".elementor-widget-pp-table-of-contents"),l("html, body").animate({scrollTop:l(e).offset().top-60},250))},getID:function(){return l("#pp-toc-"+this.$element[0].attributes["data-id"].nodeValue)}});jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/pp-table-of-contents.default",function(e){elementorFrontend.elementsHandler.addHandler(t,{$element:e})})})}(jQuery);